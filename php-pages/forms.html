<!DOCTYPE html> 
<html lang="ru">

<head> 
    <title>Мой Справочник | PHP | Формы</title>
    <meta charset="utf-8"> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="../js/jquery-3.1.0.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/layout.css">
    <style>
    .footer {
      position: fixed;
      width: 100%;
      left: 0;
      bottom: 0;
    }
    </style>
</head>

<body>
<div class="header">
	<div class="layout-positioner clearfix">
	<div class="header-title"><strong><a href="../index.html">Справочник HTML/CSS/JavaScript</a></strong></div>
	<div class="header-logo"></div>
		<ul class="header-menu">
		<li><a href="../index.html             ">Главная</a></li>
		<li><a href="../design-page.html       ">WEB-DESIGN</a></li>
		<li><a href="../html-page.html         ">HTML</a></li>
		<li><a href="../css-page.html          ">CSS</a></li>
    <li><a href="../css3-page.html         ">CSS3</a></li>
		<li><a href="../javascript-page.html   ">JS</a></li>
		<li><a class="active" href="../php.html">PHP</a></li>
	</ul>
	</div>
</div>

<div class="layout-positioner clearfix">
	<div class="vert-menu-cont">
		<ul class="vert-menu">
			<li><a href="php-lang.html               ">Язык PHP</a></li>
			<li><a href="echo.html                   ">Вывод данных</a></li>
			<li><a href="vars.html                   ">Переменные</a></li>
			<li><a href="if-else.html                ">Условные<br>операторы</a></li>
			<li><a href="cicles.html                 ">Циклы</a></li>
			<li><a href="arrayd.html                 ">Массивы</a></li>
			<li><a href="functionss.html             ">Функции</a></li>
			<li><a class="active" href="forms.html   ">Формы</a></li>
			<li><a href="post.html                   ">Почта</a></li>
            <li><a href="yii.html                    ">Yii</a></li>
            <li><a href="bitrix.html                 ">Bitrix</a></li>
			<li><a href="sql.html                    ">SQL</a></li>
			<li><a href="cms.html                    ">CMS</a></li>
			<li><a href="console.html                ">Консоль</a></li>
		</ul>
	
	
	</div>
	<div class="content clearfix">
	
	<h2>Мой Справочник | PHP | Формы</h2>

	<div class="container-fluid">
		<div class="row">
				<table class="table table-bordered table-condensed">
					<tr>
						<th class="lead  text-center  bg-primary" colspan="3">Формы</th>
					</tr>
					<tr>
						<td><b>Форма</b></td>
						<td><pre><code>&lt;<mark>form</mark> <span class="red">action</span>="<mark>check.php</mark>" name="test-form" method="<span class="red">post</span>">
  &lt;table>
    &lt;caption>Форма&lt;/caption>
    &lt;tr>
      &lt;td>&lt;label for="first-name-id">Имя: &lt;/label>&lt;/td>
      &lt;td>&lt;input type="text" placeholder="Name" name="<mark>first-name</mark>" id="first-name-id">&lt;/td>
    &lt;/tr>
    &lt;tr>
      &lt;td>&lt;label for="sername-id">Фамилия: &lt;/label>&lt;/td>
      &lt;td>&lt;input type="text" placeholder="Sername" name="<mark>sername</mark>" id="sername-id">&lt;/td>
    &lt;/tr>
    &lt;tr>
    &lt;td>&lt;label for="email-id">Email: &lt;/label>&lt;/td>
      &lt;td>&lt;input type="email" placeholder="Email" name="<mark>email</mark>" id="email-id">&lt;/td>
    &lt;/tr>
    &lt;tr>
      &lt;td>&lt;label for="date-id">Дата: &lt;/label>&lt;/td>
      &lt;td>&lt;input type="date" placeholder="Date" name="<mark>date</mark>" id="date-id">&lt;/td>
    &lt;/tr>
    &lt;tr>
      &lt;td>Отправить: &lt;/td>
      &lt;td>&lt;input type="<span class="red">submit</span>" value="Done" name="<mark>done</mark>">&lt;/td>
      &lt;/tr>
  &lt;/table>
&lt;/<mark>form</mark>></code></pre>

							<form action="check.php" name="test-form" method="post">
								<table class="table table-bordered">
									<caption>Форма</caption>
									<tr>
										<td><label for="first-name-id">Имя: </label></td>
										<td><input type="text" placeholder="Name" name="first-name" id="first-name-id"></td>
									</tr>
									<tr>
										<td><label for="sername-id">Фамилия: </label></td>
										<td><input type="text" placeholder="Sername" name="sername" id="sername-id"></td>
									</tr>
									<tr>
										<td><label for="email-id">Email: </label></td>
										<td><input type="email" placeholder="Email" name="email" id="email-id"></td>
									</tr>
									<tr>
										<td><label for="date-id">Дата: </label></td>
										<td><input type="date" placeholder="Date" name="date" id="date-id"></td>
									</tr>
									<tr>
										<td>Отправить: </td>
										<td><input type="submit" value="Done" name="done"></td>
									</tr>
								</table>
							</form>

						</td>
						<td style="width: 33.3%;">
							<span class="red">action</span>="<i>путь к php-файлу</i>" - файл обработки формы,
							если записать <span class="text-success">action=""</span>, то обработка будет осуществляться на этой же странице<br>
							<span class="red">name</span> и <span class="red">method</span> - обязательные атрибуты;<br>
							<span class="red">post</span> - сохраняет данные для отправки в php-файле, который указан в атрибуте action;<br>
							<span class="red">get</span> - делает запрос к серверу через адресную строку браузера (?text=ключевое слово1 ключевое слово2) <br>
							<span class="red">submit</span> - после нажатия делает переход на файл, указанный в action(check.php)
						</td>
					</tr>
					<tr>
						<td><b>Глобальные<br> переменные</b></td>
						<td><pre><code>print_r(<span class="red">$_POST</span>);
print_r(<span class="red">$_GET</span>);
print_r(<span class="red">$_REQUEST</span>);</code></pre>
						</td>
						<td style="width: 33.3%;">
<span class="red">$_POST</span> - хранит все переданные значения в ассоциативном массиве, имена индексов которого совпадают с атрибутами name у полей формы. <br>
<span class="red">$_GET</span> - хранит все запрашиваемые значения в ассоциативном массиве, имена индексов которого совпадают с атрибутами name у полей формы. <br>
В них храняться все переданные значения пользователей<br>
<span class="red">$_REQUEST</span> - хранит все переданные значения и методом get и post
						</td>
					</tr>
					<tr>
						<td><b>Обработка формы (check.php)</b></td>
						<td><pre><code><span class="gray">// ВЫВОД ДАННЫХ $_POST:</span>
<span class="red">print_r</span>($_POST);
<span class="red">echo</span> "&lt;hr&gt;";

<span class="gray">// ВЫВОД ВВЕДЁННЫХ ДАННЫХ:</span>
<span class="gray">// Имя:</span>
<span class="red">echo</span> "&lt;b>1. Ваше имя: &lt;/b>";
<span class="red">echo</span>("&lt;i>".$_POST["<mark>first-name</mark>"]."&lt;/i>&lt;br>");

<span class="gray">// Фамилия:</span>
<span class="red">echo</span> "&lt;b>2. Ваша фамилия: &lt;/b>";
<span class="red">echo</span>("&lt;i>".$_POST["<mark>sername</mark>"]."&lt;/i>&lt;br>");

<span class="gray">// E-mail:</span>
<span class="red">echo</span> "&lt;b>3. Ваш e-mail: &lt;/b>";
<span class="red">echo</span>("&lt;i>".$_POST["<mark>email</mark>"]."&lt;/i>&lt;br>");

<span class="gray">// Дата:</span>
<span class="red">echo</span> "&lt;b>4. Дата заполнения: &lt;/b>";
<span class="red">echo</span>("&lt;i>".$_POST["<mark>date</mark>"]."&lt;/i>&lt;br>");


<span class="gray">// ВАЛИДАЦИЯ ФОРМЫ:</span>
<span class="red">if</span> ($_POST["first-name"] == "") {
  <span class="red">echo</span> "<span class="gray">&lt;span style=\"color: red;\">Вы не ввели своё &lt;b>имя&lt;/b>! &lt;/span>&lt;br></span>";
}
<span class="red">if</span> ($_POST["sername"] == "") {
  <span class="red">echo</span> "<span class="gray">&lt;span style=\"color: red;\">Вы не ввели свою &lt;b>фамилию&lt;/b>! &lt;/span>&lt;br></span>";
}
<span class="red">if</span> ($_POST["email"] == "") {
  <span class="red">echo</span> "<span class="gray">&lt;span style=\"color: red;\">Вы не ввели ваш &lt;b>email&lt;/b>! &lt;/span>&lt;br></span>";
}
<span class="red">if</span> ($_POST["date"] == "") {
  <span class="red">echo</span> "<span class="gray">&lt;span style=\"color: red;\">Вы не ввели &lt;b>дату заполнения&lt;/b>!&lt;/span> &lt;br></span>";
}
<span class="red">if</span> (($_POST["first-name"] == <span class="red">true</span>) <span class="red">&amp;&amp;</span>
    ($_POST["sername"]    == <span class="red">true</span>) <span class="red">&amp;&amp;</span>
    ($_POST["email"]      == <span class="red">true</span>) <span class="red">&amp;&amp;</span>
    ($_POST["sername"]    == <span class="red">true</span>) <span class="red">&amp;&amp;</span>
    ($_POST["date"]       == <span class="red">true</span>)) {
  <span class="red">echo</span> "&lt;span style=\"color: green; font-size: 2em;\">&lt;b>Вы полностью заполнили форму!&lt;/b>&lt;/span></span>";
}</code></pre>
						</td>
						<td style="width: 33.3%;">
							После нажатия на &lt;input type="submit"&gt; происходит перенаправление на файл <b>check.php</b>, и вся обработка формы будет выполненна в нём
						</td>
					</tr>
					<tr>
						<td><b>Обработка формы внутри текущей страницы</b></td>
						<td><pre><code><span class="gray">// Обработка формы будет выполнена после нажатия на 
<b>&lt;input[type="submit"] name="<mark>done</mark>"&gt;</b>, так работает функция <b><mark>isset</mark></b></span>

<span class="red">if</span> (<span class="red">isset</span>($_POST["done"])) {
  <span class="red">echo</span> "<span class="gray">&lt;hr> &lt;h2>Выполнена обработка формы&lt;/h2></span>";
  <span class="gray">// php-код из <b>check.php</b></span>
}</code></pre>
						</td>
						<td style="width: 33.3%;">
							Можно писать php-код на самом "верху" страницы. <br>
							Значение атрибута action оставить пустым (<span class="red">action=""</span>).
							Результат выполнения php-кода будет отображён вверху страницы
						</td>
					</tr>
					<tr>
						<td><b>Куки</b></td>
						<td><pre><code><span class="red">setcookie</span>("num", 10, <span class="red">time()</span> + 10);
$_COOKIE;

<span class="red">session_start</span>();
$_SESSION;
<span class="red">session_destroy</span>();</code></pre>
						</td>
						<td style="width: 33.3%;"><b>Куки</b> хранятся в браузере, а <b>Сессии</b> на сервере</td>
					</tr>
					<tr>
						<th class="lead  text-center  bg-primary" colspan="3">Обработка формы</th>
					</tr>
					<tr>
						<td><b>Сохранение данных в полях формы после перезагрузки страницы</b></td>
						<td>
<pre><code><span class="gray">// 1. Сохраняем значение полей формы в переменные</span>
if (<span class="red">isset</span>($_POST["done"])) {
  $first_name = <span class="red">htmlspecialchars</span>($_POST["fifrst-name"]);
  ...
<span class="gray">// 2. Создаём сессию и сохраняем все переменные в сессию</span>
  <span class="red">$_SESSION</span>["first-name"] = $first_name;
  ...
}
<span class="gray">// 3. Прописываем в поля форм значения массива SESSION</span>
&lt;input type="text name="first-name" 
value="<span class="red">&lt;?php echo $_SESSION["first-name"]&gt;</span>"&gt;    <span class="gray">или так:</span>
value="<span class="red">&lt;?=$_SESSION["first-name"]&gt;</span>"&gt;
</code></pre>
						</td>
						<td style="width: 33.3%;"></td>
					</tr>

					<tr>
						<td><b>Появление ошибки при незаполнении форм</b></td>
						<td>
<pre><code><span class="gray">// 1. Создаём условие внутри основного</span>
<span class="red">$error</span> = false;
if ($first_name == "" || <span class="red">!preg_match("/@/", $first_name)</span>) {
  <span class="red">$error_first_name</span> = "Вы не корректно указали своё имя";
  <span class="red">$error</span> = true;
} 
<span class="gray">// далее создаём условие для каждого поля</span>
<span class="gray">// 2. Создаём переменные ошибок</span>
<span class="red">$error_first_name</span> = "Вы не указали своё имя";

<span class="gray">// 3. Вставляем спаны после полей форм</span>
&lt;input type="text name="first-name" 
  value="<span class="red">&lt;?=$_SESSION["first-name"]&gt;</span>"&gt;
  &lt;span style="color: red;"&gt;&lt;/span&gt;

<span class="gray">// 4. Прописываем в него значение переменной $error</span>
&lt;span style="color: red;"&gt;<span class="red">&lt;?=$error_first_name&gt;</span>&lt;/span&gt;
</code></pre>
						</td>
						<td style="width: 33.3%;"><b>!preg_match("/@/", $first_name)</b> - проверяет, чтобы поле не содержало спецсимволы или некорректность. <br> 
						Если <b>$error = true</b>, то сообщение не будем отправлять<br>
						<b>strlen</b> - также можно указывать в условии, проверка на длину строки
						</td>
					</tr>

					<tr>
						<td><b>Отправка формы</b></td>
						<td>
<pre><code><span class="gray">// Создаём еще одно внутреннее условие</span>
<span class="red">if</span> (!$error) {
  <span class="gray">пишем код для отправки на почту или в базу данных</span>
}
</code></pre>
						</td>
						<td style="width: 33.3%;"></td>
					</tr>




				</table>
			</div>
	</div>
	
	</div>
</div>

<div class="footer">
	<div class="layout-positioner">
		<p class="footer-text">Разработчик: Евгений Леухин<br>
													 EvgenyLeukhin@yandex.ru</p>

		<p class="footer-copyright">© 2017 Все права защищены</p>
	</div>
</div>





</body>
</html>