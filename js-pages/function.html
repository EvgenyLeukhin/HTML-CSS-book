<!DOCTYPE html>
<html lang="ru">

<head>
    <title>Мой Справочник | JS | Функции</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../css/layout.css">
</head>

<body>
<div class="header">
  <div class="layout-positioner clearfix">
  <div class="header-title"><strong><a href="../index.html">Справочник DESIGN/HTML/CSS</a></strong></div>
  <div class="header-logo"></div>
    <ul class="header-menu">
    <li><a href="../index.html">Главная</a></li>
    <li><a href="../design-page.html">WEB-DESIGN</a></li>
    <li><a href="../html-page.html">HTML</a></li>
    <li><a href="../css-page.html">CSS</a></li>
    <li><a href="../css3-page.html">CSS3</a></li>
    <li><a class="active" href="../javascript-page.html">jQ</a></li>
    <li><a href="../php.html">PHP</a></li>
  </ul>
  </div>
</div>

<div class="layout-positioner clearfix">
  <div class="vert-menu-cont">
    <ul class="vert-menu">
      <li><a class="active" href="function.html">Функции</a></li>
      <li><a href="object.html">Объекты</a></li>
      <li><a href="modules.html">Классы</a></li>

      <li>
          <a href="#">jQuery</a>
          <ul class="sub-menu sub-menu7">
              <li><a href="jquery-html.html">JQuery basics</a></li>
              <li><a href="jquery-func.html">jQuery-функции</a></li>
              <li><a href="jquery-actions.html">jQuery-события</a></li>
              <li><a href="jquery-effects.html">jQuery-эффекты</a></li>
              <li><a href="jquery-forms.html">jQuery-формы</a></li>
              <li><a href="jquery-plugins.html">jQuery-плагины</a></li>
              <li><a href="jquery-examples.html">Примеры</a></li>
          </ul>
       </li>
       <li>
          <a href="canvas.html">Canvas</a>
          <ul class="sub-menu sub-menu9">
             <li><a href="canvas.html">Настройка</a></li>
             <li><a href="canvas-figures.html">Фигуры</a></li>
             <li><a href="canvas-text.html">Текст</a></li>
             <li><a href="canvas-animation.html">Примеры</a></li>
         </ul>
       </li>

       <li><a href="../css3-pages/grunt.html">Grunt</a></li>
       <li><a href="../css3-pages/gulp.html">Gulp</a></li>
    </ul>
  </div>

  <div class="content clearfix">

  <h2>Мой Справочник | JavaScript | Функции</h2>

    <table class="discription-table" border-spacing: 5px;>

      <tr>
        <th colspan="4" style="font-size: 2em; color: darkcyan;">Стрелочные функции</th>
      </tr>
    <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">Новая запись (ES6)</td>
      <td style="width: 500px;">
        <code>
          <span class="gray">// старая запись:</span><br>
          function someFunc(a, b, c) { <br>
          &nbsp;&nbsp;... <br>
          } <hr>
          <span class="gray">// новая запись:</span><br>
          const <span class="red">someFunc = (a, b, c) =></span> { <br>
          &nbsp;&nbsp;... <br>
          } <hr>
          const <span class="red">someFunc = a =></span> console.log(a);
        </code>
      </td>
      <td rowspan="1" style="width: 300px; color: #555;">
        Если параметр только один, то круглые скобки можно опустить. <br><br>
        Если строка кода только одна, то фигурные скобки можно опустить тоже
      </td>
    </tr>

    <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">Более короткая запись кода</td>
      <td style="width: 400px;">
        <code>
          <span class="gray">// ES5</span> <br>
          var someFunc = function(a, b) { <br>
          &nbsp;&nbsp;return a + b; <br>
          }<br><br>
          <span class="gray">// ES6</span> <br>
          let somefunc2 = <span class="red">a =></span> a + 2; <br>
          let somefunc = <span class="red">(a, b) =></span> a + b; <br><br>
          <span class="gray">// Если более одной строки, то нужны {}</span> <br>
          let somefunc = <span class="red">(a, b) =></span> { <br>
          &nbsp;&nbsp; a *= 1000;<br>
          &nbsp;&nbsp; b *= 1000;<br>
          &nbsp;&nbsp; return a * b;<br>
          }
        </code>
      </td>
      <td rowspan="1" style="width: 300px; color: #555;">Это новые возможности ES6. <br>
      В скобках параметры, =&gt; указывает на тело функции. <br><br>
      Если параметр один, то скобки можно опустить, если без параметров - то пустые скобки. <br><br>
      Если в теле функции одна строка, то фигурные скобки и ключевое слово <u>return</u> можно опустить</td>
    </tr>

    <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">
               ИНСТРУКЦИЯ ОБЪЯВЛЕНИЯ ФУНКЦИИ <br> <br>
               Общее правило - в <mark>НАЗВАНИИ&nbsp;ФУНКЦИИ</mark> должен находитьтся глагол, описывающий то, что функция делает
      </td>

      <td style="width: 500px;">
               <code><pre>function <span class="red">myFunc</span>(name) {
    return 'Hello ' + name + '!';
}
var a = myFunc('Sorax').toUpperCase();
console.log(a); <span class="gray">//HELLO SORAX!</span></pre></code>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
                 Функция возвращает те значения, которые стоят после ключевого слова <span class="red">return</span>.
                 Результат функции можно сохранить в переменную, а затем вывести эту переменную в консоль
                 <br><b>()</b> - оператор вызова функции
      </td>
    </tr>
        <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">
               АНОНИМНОЕ ОБЪЯВЛЕНИЯ ФУНКЦИИ через переменную
      </td>

      <td style="width: 500px;">
               <code><pre>var <span class="red">myFunc = function(name)</span> {
    return '<span class="gray">Hello </span>' + name + '<span class="gray">!</span>';
};
console.log(myFunc('<span class="gray">Sorax</span>').toLowerCase);
<span class="gray">//hello sorax!</span></pre></code>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
                В JS функция является объектом. В такой записи в конце нужно ставить ;
      </td>
    </tr>
        <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">
               АРГУМЕНТЫ функции
      </td>

      <td style="width: 500px;">
               <code><pre>var myFunc = function(name) {
    console.log(arguments);
    return 'Hello ' + name + '!';
};
console.log(myFunc('Sorax', 34, 35));
               </pre></code>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
                arguments даёт возможность отображать все аргументы, даже если они не были указаны
                в функции
      </td>
    </tr>
    </table>


    <table class="discription-table" border-spacing: 5px;>
    <tr>
      <th colspan="4" style="font-size: 2em; color: darkcyan;">function()</th>
    </tr>

    <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">
                 Создание функции, через пробел её название, в скобках параметры функции, которые можно и не указывать. {...} указываются всегда
      </td>

      <td style="width: 500px;">
              <code>
                <span class="red">function</span> funcName(<span class="red">a</span>) {<br>
                &nbsp;&nbsp;console.log(a);<br>
                }
              </code><hr>
              <code>function</code> - ключевое слово, объявление функции<br>
              <span class="gray">function</span> <code>funcName</code> - название функции<br>
              <span class="gray">function funcName</span><code>(a)</code> - параметр функции (переменная a) <br>
              Переменная <span class="red">a</span> внутри функции не нуждается в объявлении с помощью ключевого слова <code>var</code>, она уже объявлена в теле функции <br>
              <code>{...}</code> - блок инструкций, выполняемых данной функцией<hr>
              <h3>Вызов функции через переменную</h3>
              <code>var myFunc = function(name) {...};</code>
              <p>В этой форме записи название функции можно опустить, так как уже присутствует название переменной, называется анонимная функция и в конце ставиться <code>;</code></p>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
                Функции применяют для сокращения кода и упращения процесса программирования. Задаётся один раз и может многократно вызываться далее. Если в своём коде вы повторяете одинаковые куски кода много раз, то лучше вывести из в отдельную функцию. <br> <br>

      </td>
    </tr>

       <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">
                 Вызов функции. В скобках значения параметров функции, можно задавать какие угодно значения параметров. ФУНКЦИЯ ЯВЛЯЕТСЯ ОБЪЕКТОМ.
      </td>

      <td style="width: 400px;">
             <h3>Вызываем функцию funcName и задаём значение аргумента a в ()</h3>
              <code>
               funcName(<span class="red">'Some text'</span>); <span class="gray">// a = 'Some text';</span><br>
               funcName(<span class="red">55</span>); <span class="gray">// a = 55;</span><br>
               funcName(<span class="red">true</span>); <span class="gray">// a = true;</span><br>
               funcName(<span class="red">5 > 1</span>); <span class="gray">// a = true;</span>
               <hr>
               function myFunc(a, b, c) {<br>
               &nbsp;&nbsp;c = a + b;<br>
               &nbsp;&nbsp;console.log(c);<br>
               }<br>
               myFunc('Привет, ', 'Мир!'); <span class="gray">// Привет, Мир!</span><br>
               myFunc(10, 5); <span class="gray">// 15</span>
              </code>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
               Функции применяют для сокращения кода и упращения процесса программирования, по сути функция это программа в программе
      </td>
    </tr>

        <tr>
      <th colspan="4" style="font-size: 2em; color: darkcyan;">return</th>
    </tr>

        <tr>
      <td rowspan="2" colspan="2" style="color: black; font-weight: bold; width: 300px;">
                 Возвращает из функции какие либо значения.
                 <br><br>
                 Точка выхода из функции
      </td>

      <td style="width: 400px;">
              <code>
function myFunc () {<br>
&nbsp;&nbsp;a = 5;<br>
&nbsp;&nbsp;b = 7;<br>
}<br>

console.log(c); <span class="gray">// underfined</span>
              </code>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
        Здесь вызов функции присваивается переменной c, и при вызове в консоль интерпретатор НЕ ПОНИМАЕТ, что именно нужно выводить в консоль. <br><br>
        Инструкции записанные после return игнорироваться.<br><br>
        Функция может возвращаться только, что-то одно (return-ов не может быть несколько).
      </td>
    </tr>

        <tr>

      <td style="width: 400px;">
              <code>
function myFunc () {<br>
&nbsp;&nbsp;a = 5;<br>
&nbsp;&nbsp;b = 7;<br>
&nbsp;&nbsp;<span class="red">return</span> b;<br>
}<br>
var c = myFunc ();<br>
console.log(c); <span class="gray">// 7</span>
              </code>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
              Если добавить return, какой-либо переменной, то интерпретатор вернёт именно этот параметр
      </td>
    </tr>

        <tr>
      <th colspan="4" style="font-size: 2em; color: darkcyan;">
          Глобальные и локальные переменные.
       </th>
    </tr>

          <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">
                 Локальные переменные
      </td>

      <td style="width: 400px;">
              <code>
                  var a = 1, b = 2;<br>
                  function myFunc () {<br>
                  &nbsp;&nbsp;<span class="red"><mark>var</mark> a = 10;<br>
                  &nbsp;&nbsp;<mark>var</mark> b = 20;</span><br>
                  }<br>
                  myFunc();<br>
                  console.log(a); <span class="gray">// 1</span><br>
                  console.log(b); <span class="gray">// 2</span>
              </code>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
                Функции изолированны от остальной программы, и поэтому ВСЕ ОБЪЯВЛЕННЫЕ (<code>var</code>) переменные внутри функций НЕ изменяют одноимённые переменные в остальной программе после вызова функции, такие переменные называются ЛОКАЛЬНЫМИ.
      </td>
    </tr>

        <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">
                 Глобальные переменные
      </td>

      <td style="width: 400px;">
              <code>
                  var a = 1, b = 2;<br>
                  function myFunc () {<br>
                  &nbsp;&nbsp;<span class="red">a = 10;<br>
                  &nbsp;&nbsp;b = 20;</span><br>
                  }<br>
                  myFunc();<br>
                  console.log(a); <span class="gray">// 10</span><br>
                  console.log(b); <span class="gray">// 20</span>
              </code>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
                Но если переменные не были повторно объявлены в теле функции, то они уже влияют на эти одноимённые переменные за пределами функции, такие переменные называются ГЛОБАЛЬНЫМИ, они распространяются по всему коду. Это обычные переменные, которые объявляются вне других объектов
      </td>
    </tr>

        <tr>
      <th colspan="4" style="font-size: 2em; color: darkcyan;">Область видимости функции. Цепочки областей</th>
    </tr>

          <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">

      </td>

      <td style="width: 400px;">
              <code>
<pre>
var i = 1
var func = function() {
  var i = 2;
  console.log(i); // 2
  var anotherFunc = function() {
    var i = 3;
    console.log(i); // 3
  }
}
</pre>
              </code>
      </td>

      <td rowspan="1" style="width: 300px; color: #555;">
Каждая переменная i находится в своей области видимости, если во вложенной функции убрать объявление пременой, но вызов оставить, то в консоль выйдет значение i выше по коду
      </td>
    </tr>

    <tr>
      <th colspan="4" style="font-size: 2em; color: darkcyan;">arguments</th>
    </tr>

    <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">Показывает аргументы функции внутри функции</td>
      <td style="width: 400px;">
        <code>console.log(arguments);</code>
      </td>
      <td rowspan="1" style="width: 300px; color: #555;"></td>
    </tr>

    <tr>
      <th colspan="4" style="font-size: 2em; color: darkcyan;">Замыкающая функция</th>
    </tr>
     <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;"></td>
      <td style="width: 400px;">
        <code>
          <span class="gray">// сохраняем функцию в переменную </span><br>
          var func1 = function() {<br>
&nbsp;&nbsp;<span class="gray">// объявляем внутри неё переменную i </span><br>
&nbsp;&nbsp;var i = 10; <br>
&nbsp;&nbsp;<span class="gray">// внутри этой функции возвращаем анонимную функцию, которая возвращает значение переменной i, эта функция и будет ЗАМЫКАТЬ переменную i</span> <br>
&nbsp;&nbsp;<span class="red">return function() { return i; }</span> <br>
} <br><br>


<span class="gray">// проверим, создав другую функцию с такой же переменной, но с другим значением</span> <br>
var func2 = function() {<br>
&nbsp;&nbsp;var i = 20;<br>
&nbsp;&nbsp;console.log(i);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gray">// 20</span><br>
&nbsp;&nbsp;<span class="gray">// эти два выражения находятся на одном уровне, но при вызове замыкающей функции перевой функции, она будет нам возвращать другое значение одноимённой переменной, это и есть ЗАМЫКАНИЕ, которое нарушает стандартное поведение SCOPE </span> <br>
&nbsp;&nbsp;console.log(<span class="red">func1()()</span>);<span class="gray"> // 10</span><br>
}<br>
func2();
        </code>
      </td>
      <td rowspan="1" style="width: 300px; color: #555;">Если внутри функции объявить ещё одну функцию, то эта вложенная функция будет "видеть" все переменные родительской функции. Переменные видят друг друга на одном уровне <br><br>
        Короче замыкания, это функция объявленная внутри функции, благодаря которой локальные переменные внутри старшей функции не сбрасываются после завершения работы этой функции, а остаются при повторном вызове. Замыканиями они называются потому, что младшая функция их замыкает внутри старшей. А почему так происходит, х.з. видимо фича языка.﻿ <br><br>
        То есть с помощью замыканий можно обращаться к значениям переменной какой-либо замкнутой функции внутри другой функции, в которой имеется точно такая же переменная. При этом значение переменной будет как в ЗАМКНУТОЙ функции, а не как в родительской

      </td>
    </tr>
    <tr>
      <th colspan="4" style="font-size: 2em; color: darkcyan;">Колбек-функция (callback)</th>
    </tr>
    <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">Вызов функции по окончанию работы другой функции</td>
      <td style="width: 400px;">
        <code style="font-size:1em;">
          <span class="gray">// <b style="font-size: 2em;">I способ</b> (через св-во объекта)</span> <br>
          'use strict'; <br>
          var Marx = { <br>
          &nbsp;&nbsp;<span class="red">catchPokemons</span>: function() { <br>
          &nbsp;&nbsp;&nbsp;&nbsp;var started = Date.now();<br>
          &nbsp;&nbsp;&nbsp;&nbsp;while (Date.now() - started &lt; 100) {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('I\'m gonna get them all!');<br>
          &nbsp;&nbsp;&nbsp;&nbsp;} <br>
          <span class="gray">// условие вызова колбэка</span> <br>
          &nbsp;&nbsp;&nbsp;&nbsp;if (typeof this.<mark>callBack</mark> === 'function') {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.<mark>callBack</mark>();<br>
          &nbsp;&nbsp;&nbsp;&nbsp;}<br>
          &nbsp;&nbsp;}, <br>
          &nbsp;&nbsp;<span class="gray">// создаём св-во callBack изначально равное null </span><br>
          &nbsp;&nbsp;<span class="red">callBack: </span> null <br>
          };<br><br>

          <span class="gray">// вызов функии, КОЛБЭКА НЕТ</span> <br>
          Marx.<span class="red">catchPokemons</span>(); <br><br>

          <span class="gray">// переопределяем св-во объекта - создаём колбэк</span> <br>
          Marx.<mark>callBack</mark> = function() { <br>
          &nbsp;&nbsp;console.log('I\'m calling Carl!');<br>
          }; <br><br>

          <span class="gray">// вызываем основную функцию и КОЛБЭК</span> <br>
          Marx.<span class="red">catchPokemons</span>(); <hr>
          <span class="gray">// <b style="font-size: 2em;">II способ</b> (через параметр функции)</span> <br>
          <span class="gray">// более предпочтительный</span> <br></code>
          <pre><code>var catchPokemons = function(<mark>cb</mark>) {
  var started = Date.now();
  while (Date.now() - started < 100) {
    console.log('I\'m gonna get them all');
  }
  if (typeof <mark>cb</mark> === 'function') { <mark>cb</mark>(); }
};

<span class="gray">// вызов колбека</span>
catchPokemons(function() {
  return console.log('Call to Carl');
});</code></pre>
      </td>
      <td rowspan="1" style="width: 300px; color: #555;">Простыми словами, это вызов какой-либо функции (колбэк-функции) по окончанию работы какой-либо основной функции. Эти функциии каким-то образом связаны, колбек должен знать, когда выполниться основная, чтобы выполниться самой. <hr>
      В параметр функции записываем функцию, и эта колбек-функция выполниться после  выполнения основной функции</td>
    </tr>
    <tr>
      <th colspan="4" style="font-size: 2em; color: darkcyan;">Анонимная-функция</th>
    </tr>
     <tr>
      <td colspan="2" style="color: black; font-weight: bold; width: 300px;">Объявление анонимной функции</td>
      <td style="width: 400px;"></td>

      <td rowspan="1" style="width: 300px; color: #555;"></td>
    </tr>


  </table>

        <h3>Пример кода расчёта покупки</h3>
        <code>
            var NDS = 0.18; <span class="gray">// НДС</span><br>
            function <span class="red">calcPrice</span>(n, price) { <br><span class="gray">// функция с двумя параметрами n - кол-во штук товары, price - стоимость товара</span><br>
            &nbsp;&nbsp;var total = n * price * (1 + NDS); <span class="gray">// вычисляем цену</span><br>
            &nbsp;&nbsp;var totalFomatted = total.toFixed(2); <span class="gray">// приводим дробные значение к двум знакам после запятой</span><br>
            &nbsp;&nbsp;<span class="red">return</span> totalFomatted;<br>
            <span class="gray">// делаем так, чтобы после вычисления функция возвращала значение нужной нам переменной</span><br>
            }<br>
            var sale = <span class="red">calcPrice</span>(10, 345); <span class="gray">/* вызываем функцию с параметрами (10 товаров, по 345 руб) и сохраняем значение этой функции в переменную sale*/</span><br>
            console.log(sale); <span class="gray">// выводим в консоль sale</span>
      </code>
  </div>
</div>

<div class="footer">
  <div class="layout-positioner">
    <p class="footer-text">Разработчик: Евгений Леухин<br>
                 EvgenyLeukhin@yandex.ru</p>

    <p class="footer-copyright">© 2016 - 2019</p>
  </div>
</div>





</body>
</html>
